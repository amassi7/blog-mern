{"ast":null,"code":"var _jsxFileName = \"/root/codebase/personal_blog/client/src/components/singlePost/SinglePost.jsx\",\n  _s = $RefreshSig$();\nimport { useLocation } from \"react-router\";\nimport \"./singlePost.css\";\nimport { useEffect, useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { Context } from \"../../context/Context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SinglePost() {\n  _s();\n  const location = useLocation();\n  const path = location.pathname.split(\"/\")[2];\n  const [post, setPost] = useState({});\n  const PF = \"http://localhost:5000/images/\";\n  const {\n    user\n  } = useContext(Context);\n  const [title, setTitle] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [updateMode, setUpdateMode] = useState(false);\n  useEffect(() => {\n    const getPost = async () => {\n      const res = await axios.get(\"/posts/\" + path);\n      setPost(res.data);\n      setTitle(res.data.title);\n      setDesc(res.data.desc);\n    };\n    getPost();\n  }, [path]);\n  const handleUpdate = async () => {\n    try {\n      await axios.put(`/posts/${post._id}`, {\n        username: user.username,\n        title: title,\n        desc: desc\n      });\n      //window.location.reload()\n      setUpdateMode(false);\n    } catch (err) {}\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"singlePost\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"singlePostWrapper\",\n      children: [post.photo && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: PF + post.photo,\n        alt: \"\",\n        className: \"singlePostImg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), updateMode ? /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: title,\n        className: \"singlePostTitleInput\",\n        autoFocus: true,\n        onChange: e => setTitle(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 23\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"singlePostTitle\",\n        children: [title, post.username === (user === null || user === void 0 ? void 0 : user.username) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"singlePostEdit\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"singlePostIcon fa-solid fa-pen-to-square\",\n            onClick: () => setUpdateMode(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"singlePostIcon fa-solid fa-trash\",\n            onClick: handleDelete\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"singlePostInfo\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/?user=${post.username}`,\n          className: \"link\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"singlePostAuthor\",\n            children: [\" Author: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: post.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 61\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"singlePostDate\",\n          children: new Date(post.createdAt).toDateString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), updateMode ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"singlePostDescInput\",\n        value: desc,\n        onChange: e => setDesc(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"singlePostDesc\",\n        children: desc\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), updateMode && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"singlePostButton\",\n        onClick: handleUpdate,\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(SinglePost, \"e+pfhbmVNAJGgAXvDxuNkjsCBds=\", false, function () {\n  return [useLocation];\n});\n_c = SinglePost;\nvar _c;\n$RefreshReg$(_c, \"SinglePost\");","map":{"version":3,"names":["useLocation","useEffect","useState","useContext","axios","Link","Context","jsxDEV","_jsxDEV","SinglePost","_s","location","path","pathname","split","post","setPost","PF","user","title","setTitle","desc","setDesc","updateMode","setUpdateMode","getPost","res","get","data","handleUpdate","put","_id","username","err","className","children","photo","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","value","autoFocus","onChange","e","target","onClick","handleDelete","to","Date","createdAt","toDateString","_c","$RefreshReg$"],"sources":["/root/codebase/personal_blog/client/src/components/singlePost/SinglePost.jsx"],"sourcesContent":["import { useLocation } from \"react-router\"\nimport \"./singlePost.css\"\nimport { useEffect, useState, useContext } from \"react\"\nimport axios from \"axios\"\nimport { Link } from \"react-router-dom\"\nimport { Context } from \"../../context/Context\"\n\n\nexport default function SinglePost() {\n  const location = useLocation()\n  const path = location.pathname.split(\"/\")[2]\n  const [post, setPost] = useState({})\n  const PF = \"http://localhost:5000/images/\"\n  const {user} = useContext(Context)\n  const [title, setTitle] = useState(\"\")\n  const [desc, setDesc] = useState(\"\")\n  const [updateMode, setUpdateMode] = useState(false)\n \n  useEffect(() => {\n    const getPost = async () => {\n      const res = await axios.get(\"/posts/\"+path)\n      setPost(res.data)\n      setTitle(res.data.title)\n      setDesc(res.data.desc)\n    }\n    getPost()\n  }, [path])\n\n  const handleUpdate = async () => {\n    try {\n      await axios.put(`/posts/${post._id}`,\n       {username: user.username, title:title, desc: desc})\n      //window.location.reload()\n      setUpdateMode(false)\n    } catch(err) {}\n  }\n\n  return (\n    <div className=\"singlePost\">\n      <div className=\"singlePostWrapper\">\n        {post.photo && (\n        <img src={PF + post.photo} alt=\"\" className=\"singlePostImg\" />\n        )} \n        {updateMode ? <input type=\"text\" value={title} className=\"singlePostTitleInput\" autoFocus onChange={(e) => setTitle(e.target.value)}></input> : (\n        <h1 className=\"singlePostTitle\">\n          {title}\n          {post.username === user?.username && (\n              <div className=\"singlePostEdit\">\n                  <i className=\"singlePostIcon fa-solid fa-pen-to-square\" onClick={() => setUpdateMode(true)}></i>\n                  <i className=\"singlePostIcon fa-solid fa-trash\" onClick={handleDelete}></i>\n              </div>\n            )}\n        </h1>\n        )}\n        <div className=\"singlePostInfo\">\n              <Link to={`/?user=${post.username}`} className=\"link\">\n                <span className=\"singlePostAuthor\"> Author: <b>{post.username}</b></span> \n              </Link>\n            <span className=\"singlePostDate\">{new Date(post.createdAt).toDateString()}</span>\n        </div>\n        {updateMode ? (\n          <textarea className=\"singlePostDescInput\" value={desc} onChange={(e)=>setDesc(e.target.value)}></textarea>) : (\n          <p className=\"singlePostDesc\">{desc}</p>\n          )\n        }\n        {updateMode && (\n          <button className=\"singlePostButton\" onClick={handleUpdate}>Update</button>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}